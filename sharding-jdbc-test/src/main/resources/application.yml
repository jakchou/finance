server:
  port: ${PORT:8088}
  servlet.context-path: ${CONTEXTPATH:/shardingJdbc-service}
logging:
  file: ${LOGGING_FILE:sharding-jdbc.log}

spring:
  jpa:
    show-sql: true
  shardingsphere:
    props:
      sql:
        show: true
    datasource:
      names: ds0,ds1
      ds0:
        type: com.zaxxer.hikari.HikariDataSource
        username: finance
        password: zzzZZZ000
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://rm-8vb2zrtvy2235lo75eoz.mysql.zhangbei.rds.aliyuncs.com/finance?useUnicode=true&characterEncoding=utf-8&useSSL=false
        hikari:
          connection-timeout: 30000
          idle-timeout: 600000
          max-lifetime: 1800000
      ds1:
        type: com.zaxxer.hikari.HikariDataSource
        username: finance
        password: zzzZZZ000
        driver-class-name: com.mysql.cj.jdbc.Driver
        jdbc-url: jdbc:mysql://rm-8vb2zrtvy2235lo75eoz.mysql.zhangbei.rds.aliyuncs.com/sharding-jdbc?useUnicode=true&characterEncoding=utf-8&useSSL=false
        hikari:
          connection-timeout: 30000
          idle-timeout: 600000
          max-lifetime: 1800000

    sharding:
      tables:
        etl_order:
          actualDataNodes: ds0.etl_order$->{0..4},ds1.etl_order$->{5..9}
          databaseStrategy:
            inline:
              shardingColumn: order_id
              algorithmExpression: ds$->{order_id % 2}
          tableStrategy:
            inline:
              shardingColumn: order_id
              algorithmExpression: etl_order$->{order_id % 10}
        etl_order_item:
          actualDataNodes: ds0.etl_order_item$->{0..4},ds1.etl_order_item$->{5..9}
          databaseStrategy:
            inline:
              shardingColumn: order_id
              algorithmExpression: ds$->{order_id % 2}
          tableStrategy:
            inline:
              shardingColumn: order_id
              algorithmExpression: etl_order_item$->{order_id % 10}